server:
  port: ${SERVER_PORT:9050}
spring:
  application:
    name: tech_challenge_hospital
  profiles:
    active: default

---
spring:
  config:
    activate:
      on-profile: default

  graphql: # Fornece interface para testar requisicoes GraphQL
    graphiql:
      enabled: true # localhost:8080/graphiql

  devtools:
    restart:
      additional-exclude: logs/**

  datasource:
    driver-class-name: org.h2.Driver
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password:

  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: create-drop
    defer-datasource-initialization: true
    show-sql: true

  sql: # Esta propriedade controla quando e como o Spring Boot inicializa o banco de dados com scripts SQL
    init:
      mode: always
      data-locations: classpath:db/data.sql

  security: # Configuracao do Sprint Security
    form-login:
      page: /login # Define a URL personalizada (caso precise ser usada em outra parte do sistema)

  messages: # Configuracao de mensagem para login personalizado
    basename: messages

  #    bootstrap-servers: localhost:9092  # Ou seu broker (ex.: Kafka em Docker)
  #    bootstrap-servers: ${KAFKA_BROKER:kafka:9092}
  kafka:
    bootstrap-servers: localhost:9092
    topic:
      evento-informar-paciente-consulta: evento-informar-paciente-consulta
      evento-atualizar-status-consulta: evento-atualizar-status-consulta
    consumer:
      group-id: grupo-principal
      auto-offset-reset: earliest # Ou latest, dependendo do caso de uso - earliest lê desde o início do tópico
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
      properties:
        spring.json.trusted.packages: "*"
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer  # Para JSON
      properties:
        spring.json.add.type.headers: false  # Opcional: Evita headers de tipo para simplicidade

logging:
  level:
    org:
      springframework:
        security: DEBUG # configuracao de log

